var x=i=>{throw TypeError(i)};var H=(i,t,s)=>t.has(i)||x("Cannot "+s);var E=(i,t,s)=>t.has(i)?x("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,s);var N=(i,t,s)=>(H(i,t,"access private method"),s);const h={FPS:30,CANVAS_MARGIN:150,t:0,canvas_width:0,canvas_height:0};function d(i,t){return Math.random()*(t-i)+i}function l(i,t){return Math.floor(d(i,t))}function F(){return d(0,1)<.5}class r{constructor(t,s){this.x=t,this.y=s}copy(){return new r(this.x,this.y)}magnitude(){return Math.hypot(this.x,this.y)}direction(){if(this.x==0)return this.y>0?Math.PI/2:Math.PI*3/2;let t=Math.atan(this.y/this.x);return this.x>0&&this.y>0?t:this.x<0?Math.PI+t:2*Math.PI+t}}function f(i,t){return new r(i.x*t,i.y*t)}function A(){let i=new r(0,0);for(let t=0;t<arguments.length;t++)i.x+=arguments[t].x,i.y+=arguments[t].y;return i}function M(i,t){return new r(i.x-t.x,i.y-t.y)}function O(i){let t=i.magnitude();return t==0?i:new r(i.x/t,i.y/t)}function v(i){return new r(i.y,-i.x)}function U(i,t){let s=Math.cos(t),e=Math.sin(t);return new r(s*i.x-e*i.y,e*i.x+s*i.y)}function T(i){for(;i<0;)i+=2*Math.PI;return(i+Math.PI)%(2*Math.PI)-Math.PI}const P=1.9,V=.7,B=24,X=5,g=["#E6E6E6","#E6E6E6","#EB4A2A","#EB4A2A","#F49D2C","#313130"],_=20,m=[0,.65,.85,.96,1,1,.98,.96,.93,.87,.8,.7,.59,.5,.41,.32,.21,.12,.05,0],Y=2,z=5,W=3,j=6,$=.2,Z=2.9,q=30,K=6,J=6,S=5,R=2,Q=3.5,k=.025,tt=.1,b=Math.PI/3,it=11,st=.03,ot=.005;var p,w;class ht{constructor(){E(this,p);let t=l(-150,h.canvas_width+h.CANVAS_MARGIN),s=l(-150,h.canvas_height+h.CANVAS_MARGIN);this.pos=new r(t,s),this.outOfBounds=N(this,p,w).call(this),this.angle=d(-Math.PI,Math.PI),this.vel=new r(S*Math.cos(this.angle),S*Math.sin(this.angle)),this.size=d(V,P),this.segment_length=this.size*X,this.body_width=this.size*B,this.body=[];for(let a=0;a<_;a++)this.body.push(this.pos.copy());this.body_left=[],this.body_right=[];let e=l(0,g.length),o=l(0,g.length);for(;e==o;)o=l(0,g.length);this.primary_color=g[e],this.secondary_color=g[o],this.spots=[];let n=l(Y,z+1);for(let a=0;a<n;a++)this.spots.push({loc:l(1,_-1),height:l(W,j+1),depth:d($,Z),side:F()});this.oscillation_period=it*this.size*this.size,this.oscillation_amplitude=st/this.size,this.oscillation_offset=d(0,2*Math.PI*this.oscillation_period),this.random_turn_prob=ot/this.size,this.speed_factor=Math.sqrt(P/this.size);for(let a=0;a<30;a++)this.move()}move(){let t=Math.sin(h.t/this.oscillation_period+this.oscillation_offset)*this.oscillation_amplitude;if(this.angle+=t,l(0,Math.floor(1/this.random_turn_prob))==0){let o=d(-2*b,2*b);this.angle+=o}this.angle=T(this.angle);let s=T(this.angle-this.vel.direction())*tt;s=Math.min(s,b),s=Math.max(s,-b),this.vel=U(this.vel,s);let e=(1-Math.pow(2,-Math.abs(s)))*Q;this.vel=f(this.vel,1+e),this.vel=f(this.vel,1-k*this.speed_factor),this.vel.magnitude()>S?this.vel=f(this.vel,S/this.vel.magnitude()):this.vel.magnitude()<R&&(this.vel=f(this.vel,R/this.vel.magnitude())),this.pos=A(this.pos,f(this.vel,this.speed_factor)),this.pos.x<-150&&(this.pos.x=h.canvas_width+h.CANVAS_MARGIN),this.pos.x>h.canvas_width+h.CANVAS_MARGIN&&(this.pos.x=-150),this.pos.y<-150&&(this.pos.y=h.canvas_height+h.CANVAS_MARGIN),this.pos.y>h.canvas_height+h.CANVAS_MARGIN&&(this.pos.y=-150),this.body[0]=this.pos;for(let o=1;o<_;o++){let n=M(this.body[o],this.body[o-1]);n.magnitude()>=this.segment_length&&(n=f(n,this.segment_length/n.magnitude()),this.body[o]=A(this.body[o-1],n))}this.body_left[0]=this.body[0],this.body_right[0]=this.body[0];for(let o=1;o<_;o++){let n=v(M(this.body[o-1],this.body[o]));n=f(O(n),m[o]*this.body_width/2),this.body_left[o]=A(this.body[o],n),this.body_right[o]=M(this.body[o],n)}this.outOfBounds=N(this,p,w).call(this)}draw(t){if(!this.outOfBounds){t.noStroke(),t.fill(this.primary_color),t.beginShape();for(let s=0;s<_;s++)t.vertex(this.body_left[s].x,this.body_left[s].y);for(let s=_-1;s>0;s--)t.vertex(this.body_right[s].x,this.body_right[s].y);if(t.endShape(),this.primary_color!=this.secondary_color){t.fill(this.secondary_color);for(let s=0;s<this.spots.length;s++){let e=this.spots[s];t.beginShape();for(let o=Math.max(1,e.loc-e.height);o<Math.min(_,e.loc+e.height+1);o++)e.side?t.vertex(this.body_left[o].x,this.body_left[o].y):t.vertex(this.body_right[o].x,this.body_right[o].y);for(let o=Math.min(_-1,e.loc+e.height);o>Math.max(1,e.loc-e.height);o--){let n=e.depth*(Math.pow((o-e.loc)/e.height,2)-1)+1,a=Math.max(m[o]*n,-m[o]),y=v(M(this.body[o-1],this.body[o]));y=f(O(y),(e.side?1:-1)*a*this.body_width/2);let I=A(this.body[o],y);t.vertex(I.x,I.y)}t.endShape()}}}}drawShadow(t){if(!this.outOfBounds){t.noStroke(),t.fill(0,0,0,q),t.translate(K,J),t.beginShape();for(let s=0;s<_-1;s++)t.vertex(this.body_left[s].x,this.body_left[s].y);for(let s=_-1;s>0;s--)t.vertex(this.body_right[s].x,this.body_right[s].y);t.endShape(),t.translate(-6,-6)}}}p=new WeakSet,w=function(){const t=h.scroll_y;return this.pos.y<-150+t||this.pos.y>h.screen_height+h.CANVAS_MARGIN+t};const et=140,nt=220,D=25,at="#78c73c",lt=30,rt=10,_t=10;class C{constructor(t){this.rad=d(et,nt),this.angle=d(0,360);for(let s=0;s<1e4;s++){let e=l(-150,h.canvas_width+h.CANVAS_MARGIN),o=l(-150,h.canvas_height+h.CANVAS_MARGIN);this.pos=new r(e,o);let n=!0;for(let a=0;a<t.length;a++){let y=t[a];if(y==this)continue;if(M(this.pos,y.pos).magnitude()<this.rad+y.rad){n=!1;break}}if(n)break}}draw(t){t.noStroke(),t.fill(at),t.arc(this.pos.x,this.pos.y,this.rad,this.rad,this.angle-D,this.angle)}drawShadow(t){t.noStroke(),t.fill(0,0,0,lt),t.translate(rt,_t),t.arc(this.pos.x,this.pos.y,this.rad,this.rad,this.angle-D,this.angle),t.translate(-10,-10)}}const dt=1e-5,ct=130,G=4e-6,L=50,ft="#278eab";let u=[],c=[];function ut(i,t,s){h.canvas_width=document.body.clientWidth*1.02,h.canvas_height=document.body.scrollHeight,i.frameRate(h.FPS),i.angleMode("DEGREES");let e=Math.min(Math.floor(h.canvas_width*h.canvas_height*dt),ct);for(let n=0;n<e;n++)u.push(new ht);let o=Math.min(Math.floor(h.canvas_width*h.canvas_height*G),L);for(let n=0;n<o;n++)c.push(new C(c))}function gt(i,t,s){h.canvas_width=t,h.canvas_height=s;let e=Math.min(Math.floor(h.canvas_width*h.canvas_height*G),L);for(let o=c.length;o<e;o++)c.push(new C(c))}function Mt(i){i.background(ft);for(let t=0;t<u.length;t++)u[t].move();for(let t=0;t<u.length;t++)u[t].drawShadow(i);for(let t=0;t<c.length;t++)c[t].drawShadow(i);for(let t=0;t<u.length;t++)u[t].draw(i);for(let t=0;t<c.length;t++)c[t].draw(i);h.t++}export{Mt as d,gt as r,ut as s};
